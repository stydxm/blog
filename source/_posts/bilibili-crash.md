---
title: 今天晚上，B站炸了
date: 2021-07-13 23:53:00
updated: 2022-07-12 12:17:00
categories: 技术
tags: B站
---

> 本文原发布在QQ空间，博客搭好之后搬过来的

B站炸的原因，我觉得是技术问题或者内部问题，而不是网传的入侵或者停电着火。  

<!-- more -->

炸的时候边缘CDN正常，因为我之前开的标签页还能看，而且还能缓存后面的内容。如果是被打的话，带宽够高（高到能打死**几乎不可能**），CDN会先被打死，但这次是源站出问题。就算真的是源站被打死了，而这次404和502都有，不像被打了。

关于停电着火，像这样规模的公司，至少在多地有多个数据中心，数据中心内部还有UPS和发电机。即使一个机房完全无法使用，把流量割接到别的机房也用不了多久。而且B站的会员购和游戏没问题，这两个业务和主站的视频业务是高度独立的，技术问题不会影响到这两个业务，所以技术问题的可能性更大一些。

至于各种叔叔**的，也就图一乐，不必当真。

**2022.7.12 update**

时隔近一年（比一年只少了一天）之后，B站官方的[事故报告](https://www.bilibili.com/read/cv17521097)来了。  

读完之后，和我一年之前想的差不多。原因确实是技术原因，而非外部攻击或者机房起火。

至于恢复方式嘛……重启下？诶不行。前段时间的更新回滚掉？诶还不行……要不重新搭一个……？

事故报告里写的根本原因在于弱类型语言里整型0和字符型"0"导致一个gcd函数死循环了。问题本身不大但导致了大问题。